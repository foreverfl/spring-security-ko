[[jackson]]
= Jackson 지원

Spring Security는 Spring Security 관련 클래스를 지속하기 위한 Jackson 지원을 제공합니다.
이는 분산 세션(예: 세션 복제, Spring Session 등)을 사용할 때 Spring Security 관련 클래스의 직렬화 성능을 향상시킬 수 있습니다.

이를 사용하려면 ``SecurityJackson2Modules.getModules(ClassLoader)``를 ``ObjectMapper``에 등록하세요 (https://github.com/FasterXML/jackson-databind[jackson-databind]):

[tabs]
======
Java::
+
[source,java,role="primary"]
----
ObjectMapper mapper = new ObjectMapper();
ClassLoader loader = getClass().getClassLoader();
List<Module> modules = SecurityJackson2Modules.getModules(loader);
mapper.registerModules(modules);

// ... ObjectMapper를 평소대로 사용 ...
SecurityContext context = new SecurityContextImpl();
// ...
String json = mapper.writeValueAsString(context);
----

Kotlin::
+
[source,kotlin,role="secondary"]
----
val mapper = ObjectMapper()
val loader = javaClass.classLoader
val modules: MutableList<Module> = SecurityJackson2Modules.getModules(loader)
mapper.registerModules(modules)

// ... ObjectMapper를 평소대로 사용 ...
val context: SecurityContext = SecurityContextImpl()
// ...
val json: String = mapper.writeValueAsString(context)
----
======

[NOTE]
====
다음 Spring Security 모듈들이 Jackson 지원을 제공합니다:

- spring-security-core (`CoreJackson2Module`)
- spring-security-web (`WebJackson2Module`, `WebServletJackson2Module`, `WebServerJackson2Module`)
- xref:servlet/oauth2/client/index.adoc#oauth2client[ spring-security-oauth2-client] (`OAuth2ClientJackson2Module`)
- spring-security-cas (`CasJackson2Module`)
====